<style>
    .preload {
      background-color: black;
        position: fixed;
        z-index: 99999999999999;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.5s ease 0s;
    }

    .preload.hide-preload {
        opacity: 0;
        pointer-events: none;
        z-index: -100;
    }

    .preload-bg,
    .preload-bg-mobile {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .preload-bg {
      display: none;
    }

    .preload-logo {
      position: relative;
      z-index: 2;
        width: 100%;
        max-width: 290px;
    }
    
    .preload-logo img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: contain;
    }

    @media(min-width: 768px) {
        .preload-logo {
            max-width: 535px;
        }

        .preload-bg {
          display: block;
        }

        .preload-bg-mobile {
          display: none;
        }
    }
</style>
<div class="preload" style="background-color: black;">
    <img class="preload-bg" src="{{ section.settings.bg | image_url }}" alt="{{ section.settings.bg.alt }}">
    <img class="preload-bg-mobile" src="{{ section.settings.bg_mobile | image_url }}" alt="{{ section.settings.bg_mobile.alt }}">
    {% if section.settings.logo != blank %}
        <div class="preload-logo">
            <img src="{{ section.settings.logo | image_url }}" alt="{{ section.settings.logo.alt }}">
        </div>
    {% endif %}
</div>

<script>
  (function () {
    const preload = document.querySelector('.preload');
    if (!preload) return;

    const hidePreload = () => {
      preload.classList.add('hide-preload');
      preload.addEventListener('transitionend', () => {
        if (preload && preload.parentNode) preload.parentNode.removeChild(preload);
      }, { once: true });
    };

    if (document.readyState === 'complete') {
      setTimeout(hidePreload, 1000);
    } else {
      window.addEventListener('load', () => setTimeout(hidePreload, 1000), { once: true });
    }
  })();
</script>

{% schema %}
{
  "name": "Preload",
  "settings": [
    {
        "type": "image_picker",
        "id": "bg",
        "label": "Background"
    },
    {
        "type": "image_picker",
        "id": "bg_mobile",
        "label": "Background - mobile"
    },
    {
        "type": "image_picker",
        "id": "logo",
        "label": "Logo"
    }
  ],
  "presets": [
    {
        "name": "Preload"
    }
  ]
}
{% endschema %}